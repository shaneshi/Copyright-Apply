# 软件著作权申请自动化工具

一个通用的 Python 自动化工具，用于生成软件著作权（软著）申请材料。通过集成 Claude Code 的 LLM 能力，自动生成需求规格说明书、前端代码、功能说明文档等完整材料。

## 项目简介

本工具专为软著申请场景设计，可根据任意系统的需求自动生成：
- 8-10 个功能模块的 SRS（需求规格说明书）
- 每个模块的 HTML/CSS 前端代码
- 软件功能说明书
- 软件安装说明书
- 软件著作权登记信息表
- 完整源代码合集（Markdown 格式）

### 核心特点

- ✅ **通用性强**：适用于任意软件系统的软著申请
- ✅ **自动化程度高**：一键生成所有申请材料
- ✅ **LLM 集成**：利用 Claude Code 生成高质量内容
- ✅ **模板驱动**：基于 Markdown 模板，易于自定义
- ✅ **代码行数控制**：自动调整至目标行数范围
- ✅ **主题统一**：所有模块使用统一的蓝色主题 (#3498db)
- ✅ **Linux 专用**：针对 Linux 环境优化（硬编码要求）


## 项目结构

```
vsCopyright/
├── main.py                          # 主编排脚本
├── ai_bridge.py                     # AI桥接模块，处理Claude Code集成
├── auto_generator.py                # 自动化生成器，监听待处理任务
├── run_with_defaults.py             # 测试脚本（使用默认值）
├── requirements.txt                 # Python 依赖
├── README.md                        # 本文件
├── template/                        # 模板文件目录
│   ├── variables.md                 # 变量定义模板
│   ├── 软件功能说明书.md            # 功能说明书模板
│   ├── 软件安装说明书.md            # 安装说明书模板
│   └── 软件著作权登记信息表.md      # 著作权登记表模板
├── process/                         # 中间文件目录（HTML 模块）
└── output/                          # 最终输出目录
    ├── 软件功能说明书.md            # 生成的功能说明书
    ├── 软件安装说明书.md            # 生成的安装说明书
    ├── 软件著作权登记信息表.md      # 生成的登记表
    └── 源代码.md                    # 所有代码的合集
```

## 快速开始

### 环境要求

- Python 3.10+
- VS Code + Claude Code 扩展
- Linux 环境（推荐）

### 安装

```bash
# 克隆或下载项目
cd /path/to/vsCopyright

# 赋予执行权限
chmod +x main.py
```

### 基本使用

```bash
# 运行主脚本
python3 main.py

# 或使用默认值测试
python3 run_with_defaults.py
```

## 工作流程

运行脚本后，将按以下步骤自动执行：

```
┌─────────────────────────────────────────────────────────────┐
│           软件著作权申请材料生成流程                          │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
        ┌───────────────────────────────────────┐
        │  Step 1: 收集用户输入                   │
        │  - 软件名称、版本号                     │
        │  - 申请人信息、完成日期                 │
        │  - 行业领域、联系方式                   │
        └───────────────┬───────────────────────┘
                        │
                        ▼
        ┌───────────────────────────────────────┐
        │  Step 2: 生成 SRS（需求规格说明书）      │
        │  - 8-10 个功能模块                     │
        │  - 每个模块包含名称、描述、特性列表      │
        └───────────────┬───────────────────────┘
                        │
                        ▼
        ┌───────────────────────────────────────┐
        │  Step 3: 生成前端 HTML/CSS 代码        │
        │  - 为每个模块生成独立的 HTML 文件       │
        │  - 统一蓝色主题 (#3498db)              │
        │  - 每个文件开头标注行数                │
        └───────────────┬───────────────────────┘
                        │
                        ▼
        ┌───────────────────────────────────────┐
        │  Step 4: 调整代码行数                  │
        │  - 目标：3000-3200 行                  │
        │  - 自动生成额外代码直至达标             │
        └───────────────┬───────────────────────┘
                        │
                        ▼
        ┌───────────────────────────────────────┐
        │  Step 5: 生成功能描述                  │
        │  - 主要功能概要（150字左右）            │
        │  - 主要功能详细（500-800字）            │
        └───────────────┬───────────────────────┘
                        │
                        ▼
        ┌───────────────────────────────────────┐
        │  Step 6: 生成开发目的                  │
        │  - 100-150 字的开发目的说明            │
        └───────────────┬───────────────────────┘
                        │
                        ▼
        ┌───────────────────────────────────────┐
        │  Step 7: 生成最终文档                  │
        │  - 软件功能说明书                      │
        │  - 软件安装说明书                      │
        │  - 软件著作权登记信息表                 │
        │  - 源代码.md（所有代码合集）             │
        └───────────────┬───────────────────────┘
                        │
                        ▼
                    ✅ 完成
```

### Claude Code 集成方式

脚本采用**交互式提示词**模式与 Claude Code 集成：

1. **自动保存提示词**到 `prompts/` 目录
2. **显示操作指引**告诉用户如何使用 Claude Code
3. **自动检测**输出文件是否创建（每 2 秒检查）
4. **支持 Ctrl+C**手动继续或等待自动检测

示例交互：
```
📋 提示词已保存: prompts/srs.json.prompt
📄 输出文件: process/srs.json

请在 VS Code 中执行以下操作：
--------------------------------------------------
1. 打开 Claude Code (Ctrl+Shift+C / Cmd+Shift+C)
2. 输入: 请阅读 prompts/srs.json.prompt 并生成内容
3. 将生成的 JSON/Markdown 内容保存到 process/srs.json
--------------------------------------------------

⏳ 等待输出文件创建... (每 2 秒检查一次)
💡 提示: 创建文件后按 Ctrl+C 继续，或等待自动检测
```

## 模板系统

### variables.md - 变量定义模板

定义系统需要收集的用户变量：

```markdown
# 软著申请变量定义表

- software_name: [软件全称]
- version: [版本号，默认 V1.0]
- applicant: [著作权人名称]
- comp_date: [软件开发完成日期]
- industry: [面向领域/行业]
- applicant_address: [申请人详细地址]
- applicant_contact: [联系人姓名]
- applicant_phone: [手机号码]
```

### 功能说明书模板

使用 `{{变量名}}` 占位符：

```markdown
# {{software_name}} 功能说明书

## 1. 软件简介
本文档旨在描述 {{software_name}} 的各项功能模块...

## 3. 功能模块详细说明
{{main_functions_details}}
```

### 自动生成的变量

以下变量由 LLM 自动生成，无需手动输入：

| 变量名 | 说明 | 来源 |
|--------|------|------|
| `dev_purpose` | 开发目的 | Claude Code 生成 |
| `main_functions_summary` | 主要功能概要 | Claude Code 生成 |
| `main_functions_details` | 主要功能详细说明 | Claude Code 生成 |
| `line_count` | 程序量（行数） | 自动计算 |

## 配置选项

编辑 `main.py` 中的配置常量：

```python
# 目标代码行数范围
TARGET_MIN_LINES = 3000
TARGET_MAX_LINES = 3200

# 硬编码默认值
DEFAULT_OS = "Linux"
DEFAULT_DEV_TOOL = "VSCode"

# 主题色（统一使用蓝色）
THEME_COLOR = "#3498db"
```

## 自定义新系统

### 方法 1：修改 variables.md

编辑 `template/variables.md`，添加或修改变量定义：

```markdown
- software_name: [软件全称]
- version: [版本号]
- your_custom_var: [你的自定义变量]
```

### 方法 2：修改模板文件

根据需要修改 `template/` 目录下的模板文件，使用 `{{变量名}}` 占位符。

### 方法 3：调整生成逻辑

修改 `main.py` 中的以下部分：

- `generate_html_code()` - 修改 HTML 生成提示词
- `generate_function_descriptions()` - 修改功能描述生成
- `generate_source_code_markdown()` - 修改源代码输出格式

## 输出文件说明

### output/ 目录

| 文件 | 说明 |
|------|------|
| **软件功能说明书.md** | 详细的功能模块说明，包含 8 个模块的概述、功能、交互流程 |
| **软件安装说明书.md** | 完整的安装部署指南，包含环境准备、后端搭建、前端部署、SSL 配置等 |
| **软件著作权登记信息表.md** | 软著申请表，包含基本信息、技术环境、功能特点、申请人信息 |
| **源代码.md** | 所有 HTML 代码的合集，包含目录导航和统计信息 |

### process/ 目录

包含每个功能模块的独立 HTML 文件：

```
module_01_用户管理模块.html      (约 400 行)
module_02_失物信息发布模块.html   (约 400 行)
module_03_寻物信息发布模块.html   (约 400 行)
...
```

每个文件：
- 开头标注 `<!-- Total Lines: XXXX -->`
- 统一使用蓝色主题 (#3498db)
- 包含完整的 HTML/CSS/JavaScript

## 命令行选项

```bash
# 基本运行
python3 main.py

# 使用 CLI 模式（如果 Claude Code CLI 可用）
python3 main.py --mode cli

# 跳过用户输入，使用默认值
python3 main.py --skip-inputs
```

## 示例：为"医院短信通知平台"生成材料

```bash
# 1. 运行脚本
python3 main.py

# 2. 按提示输入信息
请输入软件全称: 医院短信通知平台
请输入版本号 [V1.0]:
请输入软件开发完成日期: 2024.12.31
请输入面向领域/行业: 医院
...

# 3. 按照 Claude Code 集成指引完成各步骤
# 4. 在 output/ 目录查看生成的材料
```

生成的材料：
- 5 个功能模块（患者管理模块、短信发送模块、通知规则配置模块、短信日志与统计模块、系统管理模块）
- 约 8000+ 行 HTML/CSS/JavaScript 代码
- 完整的功能说明书、安装说明书、登记表
- 统一的蓝色主题设计

## 高级功能

### 行数自动控制

脚本会自动检测代码行数并调整：

```python
# 如果当前行数 < 目标最小值
while total_lines < TARGET_MIN_LINES:
    # 生成额外代码
    additional_code = claude.generate_additional_code(...)
    total_lines += count_lines(additional_code)
```

### 源代码合集生成

自动将所有 HTML 文件合并为一个 Markdown 文件：

```markdown
# 软件名称 源代码

## 代码目录
1. [模块 1](#模块-1)
2. [模块 2](#模块-2)
...

## 模块 1
**文件**: module_01.html
**行数**: 400 行

```html
...代码内容...
```

## 统计信息
- 模块数量: 8
- 总代码行数: 7963 行
```

### 主题色统一

所有模块强制使用统一的蓝色主题：

```css
:root {
    --primary-color: #3498db;      /* 主色调 - 蓝色 */
    --primary-dark: #2980b9;       /* 深蓝色 */
    --primary-light: #5dade2;      /* 浅蓝色 */
}
```

## 常见问题

### Q: 如何修改代码行数目标？

A: 编辑 `main.py` 中的 `TARGET_MIN_LINES` 和 `TARGET_MAX_LINES` 常量。

### Q: 如何添加更多功能模块？

A: 修改 SRS 生成提示词，将模块数量从 8-10 改为所需数量。也可以通过修改 ai_bridge.py 中的 generate_srs_auto 函数来自定义模块数量。

### Q: 生成的 HTML 代码质量如何？

A: 代码由 Claude Code LLM 生成，包含：
- 语义化 HTML5
- 响应式 CSS（媒体查询）
- JavaScript 交互逻辑
- 详细的中文注释

### Q: 可以用于商业项目吗？

A: 可以，本工具是通用的软著申请辅助工具，适用于任意软件系统，特别是医疗信息系统如医院短信通知平台等。

### Q: 如何验证生成的材料是否符合软著要求？

A: 建议咨询专业的软著代理机构或当地版权局，确保材料符合最新要求。

## 技术架构

```
┌─────────────────────────────────────────────────────────┐
│                    main.py (主编排器)                     │
│  ┌─────────────────────────────────────────────────┐   │
│  │  SoftwareCopyrightOrchestrator                  │   │
│  │  - collect_user_inputs()                       │   │
│  │  - generate_srs()                              │   │
│  │  - generate_frontend_code()                    │   │
│  │  - adjust_line_count()                         │   │
│  │  - generate_function_descriptions()            │   │
│  │  - generate_dev_purpose()                      │   │
│  │  - generate_output_documents()                 │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────┐
│              ClaudeCodeIntegrator (LLM 集成)             │
│  ┌─────────────────────────────────────────────────┐   │
│  │  - generate_srs()                              │   │
│  │  - generate_html_code()                        │   │
│  │  - generate_additional_code()                  │   │
│  │  - generate_function_descriptions()            │   │
│  │  - generate_dev_purpose()                      │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────┐
│              ai_bridge.py (AI桥接模块)                    │
│  ┌─────────────────────────────────────────────────┐   │
│  │  AIBridge                                      │   │
│  │  - call_claude_cli()                           │   │
│  │  - check_request()                             │   │
│  │  - complete_request()                          │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────┐
│         auto_generator.py (自动化生成器)                  │
│  ┌─────────────────────────────────────────────────┐   │
│  │  - 监听待处理任务                                │   │
│  │  - 处理生成请求                                  │   │
│  │  - 生成高质量代码                                │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────┐
│                   Claude Code (VS Code 扩展)             │
│  - 接收提示词文件                                        │
│  - 生成 JSON/Markdown/HTML 内容                        │
│  - 保存到指定输出文件                                    │
└─────────────────────────────────────────────────────────┘
```

## 安全声明

⚠️ **重要安全提示**：本工具在设计时主要考虑功能性，可能存在以下安全风险：

- 路径遍历漏洞：输入未经充分验证可能导致访问系统敏感文件
- 命令注入风险：直接拼接用户输入到系统命令中
- 文件操作安全：未经充分验证的文件名可能被恶意利用

**建议仅在受控环境下使用，避免在生产环境中部署**。

## 贡献指南

欢迎贡献代码、报告问题或提出改进建议！

### 开发建议

1. 保持模板的可定制性
2. 确保硬编码的 Linux/VSCode 要求清晰标注
3. 维护统一的代码风格
4. 添加详细的中文注释
5. 注意安全性改进

### 提交 PR

1. Fork 项目
2. 创建特性分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 许可证

本项目仅供学习和个人使用。使用本工具生成的材料请遵守相关法律法规。

### 更新日志

### v1.1.0 (2026-01-30)
- ✨ 新增对医疗信息系统的支持
- ✅ 支持医院短信通知平台等医疗系统
- ✅ 优化功能模块结构
- ✅ 改进代码生成质量
- ✅ 修复功能说明书层级结构问题
- ✅ 新增ai_bridge.py和auto_generator.py模块
- ✅ 支持更多样化的模块类型

### v1.0.0 (2025-01-30)
- ✨ 初始版本发布
- ✅ 支持 8 个功能模块生成
- ✅ Claude Code 集成
- ✅ 自动行数控制
- ✅ 统一蓝色主题
- ✅ 源代码合集生成
- ✅ 完整文档输出

## 联系方式

如有问题或建议，请通过以下方式联系：

- 提交 Issue
- 发送 Pull Request
- 通过 VS Code 扩展市场反馈

---

**注意**：本工具旨在辅助软著申请材料的准备工作，不构成法律建议。实际申请时请咨询专业机构并遵循当地版权局的具体要求。
